# QR碼遊戲系統使用說明

## 系統概述
這是一個使用QR碼記錄攤位遊戲的Web應用程式，支援管理2-30個攤位遊戲和約300名使用者，使用GitHub+Vercel+Supabase作為技術棧。

## 系統要求
- 現代Web瀏覽器（Chrome、Firefox、Safari、Edge等）
- 網路連線
- 攝影機（用於掃描QR碼）

## 主要功能
1. **管理員功能**
   - 遊戲管理：新增、編輯、刪除遊戲
   - 使用者管理：新增、編輯、刪除使用者，批量匯入使用者
   - 數據統計：查看遊戲和使用者數據統計
   - 數據匯出：匯出遊戲、使用者和記錄數據

2. **使用者功能**
   - 掃描QR碼登入
   - 記錄遊戲成績
   - 查看個人遊戲記錄

## 系統訪問
### 本地開發
1. 啟動本地伺服器：
```bash
cd qr-game-system-complete
python3 -m http.server 8000
```

2. 在瀏覽器中訪問：`http://localhost:8000`

### 生產環境
- 部署到Vercel後訪問對應的URL

## 登入方式
### 管理員登入
1. 訪問：`http://localhost:8000/admin-login.html`
2. 預設帳號：
   - 使用者名稱：admin
   - 密碼：admin123

### 使用者登入
1. 訪問：`http://localhost:8000/user-login.html`
2. 選擇登入方式：
   - 掃描使用者QR碼
   - 輸入使用者ID和姓名

## 診斷和修復工具
系統提供了多種診斷和修復工具：

1. **系統診斷工具** (`diagnosis-tool.html`)
   - 全面檢測系統功能狀態
   - 測試資料庫連線、表結構和核心功能
   - 提供詳細的診斷報告和修復建議

2. **詳細調試工具** (`debug-tool.html`)
   - 系統診斷和問題排查
   - 測試資料庫連線、初始化資料庫
   - 檢查和建立管理員帳號
   - 測試登入功能

3. **資料庫測試工具** (`db-test.html`)
   - 資料庫連線和帳號測試
   - 管理員帳號資訊查看
   - 登入測試和密碼驗證
   - 密碼重設功能

4. **管理員修復工具** (`fix-admin.html`)
   - 修復管理員帳號問題
   - 四步式自動修復流程

5. **應急登入工具** (`emergency-login.html`)
   - 資料庫不可用時的緊急訪問
   - 跳過資料庫驗證直接登入

## 常見問題解決
### 1. 無法連線資料庫
- 檢查`js/config.js`中的Supabase配置
- 使用系統診斷工具測試連線
- 確認API金鑰和URL是否正確

### 2. 管理員登入失敗
- 使用管理員修復工具重設帳號
- 檢查資料庫中管理員表的結構
- 使用應急登入工具臨時訪問

### 3. 無法掃描QR碼
- 確保瀏覽器有權限訪問攝影機
- 使用HTTPS協議（生產環境）
- 檢查攝影機是否正常工作

### 4. 功能按鈕不工作
- 檢查瀏覽器控制台是否有錯誤
- 確認資料庫連線正常
- 使用系統診斷工具檢測功能狀態

## 資料結構
### 遊戲表 (games)
- id: 遊戲ID
- name: 遊戲名稱
- description: 遊戲描述
- max_score: 最大分數
- created_at: 建立時間

### 使用者表 (users)
- id: 使用者ID
- name: 使用者姓名
- student_id: 學號/ID
- total_score: 總分
- created_at: 建立時間

### 遊戲記錄表 (game_records)
- id: 記錄ID
- user_id: 使用者ID
- game_id: 遊戲ID
- score: 分數
- recorded_at: 記錄時間

### 管理員表 (admins)
- id: 管理員ID
- username: 使用者名稱
- password_hash: 密碼雜湊
- created_at: 建立時間

## 安全注意事項
1. 生產環境中請修改預設管理員密碼
2. 使用HTTPS協議保護資料傳輸
3. 定期備份資料庫
4. 限制管理員帳號的使用

## 技術支援
如有問題，請使用系統提供的診斷工具進行排查，或聯繫技術支援。