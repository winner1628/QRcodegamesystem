# QR碼遊戲系統

## 項目簡介

QR碼遊戲系統是一個基於Web的遊戲管理平台，透過QR碼技術實現玩家遊戲記錄、分數統計和排行榜功能。系統支持管理員後台管理和普通用戶前台使用，適用於各種娛樂場所、學校活動或企業團建等場景。

### 核心功能

- **用戶管理**：支持管理員和普通用戶角色
- **遊戲管理**：可自定義多種遊戲類型和評分標準
- **QR碼生成**：為每個遊戲記錄生成唯一的QR碼
- **分數統計**：自動計算和統計玩家得分
- **排行榜**：實時更新的遊戲成績排行榜
- **數據管理**：支持數據庫初始化、備份和重置功能

### 技術架構

- **前端**：HTML5, CSS3, JavaScript, Tailwind CSS
- **數據庫**：Supabase PostgreSQL
- **部署**：GitHub + Vercel

## 數據庫表結構

系統使用以下5個主要數據表：

1. **admins** - 管理員用戶表
2. **users** - 普通用戶表
3. **games** - 遊戲表
4. **game_records** - 遊戲記錄表
5. **game_statistics** - 遊戲統計表

詳細的表結構請參考 [數據庫表結構](database-structure.html) 頁面。

## HTML文件說明

### 主要頁面

#### 1. index.html
- **用途**：系統首頁，提供用戶登錄入口和功能導航
- **功能**：
  - 管理員和普通用戶登錄表單
  - 系統功能介紹
  - 快速訪問各個設置頁面的鏈接

#### 2. admin-login.html
- **用途**：管理員專用登錄頁面
- **功能**：
  - 管理員賬號密碼驗證
  - 登錄狀態管理
  - 錯誤信息提示

#### 3. user-login.html
- **用途**：普通用戶登錄頁面
- **功能**：
  - 用戶註冊和登錄
  - 密碼重置功能
  - 用戶權限控制

#### 4. admin-main.html
- **用途**：管理員後台主頁
- **功能**：
  - 系統概覽數據展示
  - 快速訪問各個管理模塊
  - 最新活動記錄查看

#### 5. admin-games.html
- **用途**：遊戲管理頁面
- **功能**：
  - 創建新遊戲
  - 編輯和刪除現有遊戲
  - 設置遊戲參數和評分標準
  - 查看遊戲統計數據

#### 6. admin-users.html
- **用途**：用戶管理頁面
- **功能**：
  - 查看所有用戶列表
  - 管理用戶權限
  - 禁用/啟用用戶賬號
  - 重置用戶密碼

#### 7. admin-stats.html
- **用途**：數據統計和分析頁面
- **功能**：
  - 系統整體數據統計
  - 遊戲參與度分析
  - 玩家成績分布圖表
  - 數據導出功能

#### 8. user-dashboard.html
- **用途**：普通用戶個人中心
- **功能**：
  - 個人資料管理
  - 歷史遊戲記錄查詢
  - 個人成績統計
  - 參與的遊戲列表

### 設置和工具頁面

#### 9. setup-database.html
- **用途**：高級數據庫管理工具
- **功能**：
  - 數據庫初始化（自動創建表和插入示例數據）
  - 數據庫重置（清空所有數據）
  - 數據備份和還原
  - 連接狀態測試
- **自動化功能**：
  - 檢測表是否存在，不存在時自動創建
  - 插入默認管理員賬號和示例遊戲數據

#### 10. simple-setup.html
- **用途**：簡化版數據庫設置工具
- **功能**：
  - 快速創建必要的數據表
  - 插入默認數據
  - 數據庫連接測試
- **自動化功能**：
  - 一鍵完成所有表的創建和數據初始化
  - 智能檢測已存在的表，避免重複創建

#### 11. database-structure.html
- **用途**：數據庫表結構參考文檔
- **功能**：
  - 展示所有表的字段結構
  - 數據類型和約束條件說明
  - SQL創建語句示例

#### 12. verify-fix.html
- **用途**：系統修復和驗證工具
- **功能**：
  - Supabase客戶端初始化檢查
  - 數據庫連接測試
  - 管理員登錄功能驗證
  - 自動化診斷和修復建議

#### 13. test-supabase.html
- **用途**：Supabase連接測試工具
- **功能**：
  - 測試Supabase客戶端加載狀態
  - 數據庫連接測試
  - API響應時間檢測
  - 錯誤信息詳細展示

## 自動化數據庫設置

### 自動表創建功能

系統提供了強大的自動化數據庫設置功能，主要通過以下兩個頁面實現：

#### 1. setup-database.html 的自動化功能

- **智能表檢測**：自動檢查必要的表是否存在
- **自動表創建**：如果表不存在，會自動創建所需的表結構
- **示例數據插入**：
  - 默認管理員賬號：`admin/admin123`
  - 5個示例遊戲數據
  - 初始系統配置

#### 2. simple-setup.html 的自動化功能

- **一鍵設置**：單擊按鈕完成所有數據庫設置
- **智能處理**：
  - 通過嘗試插入數據的方式自動創建表
  - 避免重複插入相同的數據
  - 提供詳細的操作日誌

### 示例數據內容

#### 默認管理員賬號
```
用戶名：admin
密碼：admin123
```

#### 示例遊戲數據
1. **投籃挑戰** - 三分線外投籃，投中得分
2. **套圈圈** - 用圈圈套中目標物
3. **射擊遊戲** - 氣槍射擊目標
4. **闖關挑戰** - 完成障礙闖關
5. **益智謎題** - 解開謎題獲得分數

## 快速開始

### 1. 環境準備

1. 確保已安裝現代瀏覽器（Chrome, Firefox, Edge等）
2. 註冊Supabase賬號並創建數據庫
3. 配置環境變量：
   - SUPABASE_URL
   - SUPABASE_KEY

### 2. 數據庫設置

1. 打開 [簡單設置](simple-setup.html) 頁面
2. 點擊"創建表"按鈕
3. 等待設置完成，確認所有表創建成功

### 3. 系統登錄

1. 打開 [系統首頁](index.html)
2. 使用默認管理員賬號登錄：
   - 用戶名：admin
   - 密碼：admin123
3. 進入管理員後台進行進一步設置

### 4. 用戶使用

1. 普通用戶可以在首頁註冊新賬號
2. 登錄後可以參與各種遊戲
3. 通過掃描QR碼記錄遊戲成績

## 故障排除

### 常見問題

#### 1. 數據庫連接失敗
- **解決方法**：
  - 檢查Supabase URL和API Key是否正確
  - 確認網絡連接正常
  - 使用 [連接測試](test-supabase.html) 頁面診斷問題

#### 2. 登錄失敗
- **解決方法**：
  - 確認使用正確的用戶名和密碼
  - 檢查用戶權限設置
  - 使用 [修復驗證](verify-fix.html) 工具檢查系統狀態

#### 3. 表創建失敗
- **解決方法**：
  - 檢查Supabase權限設置
  - 確認數據庫用戶有創建表的權限
  - 查看瀏覽器控制台的錯誤信息

### 日志查看

所有操作日誌都會顯示在相應頁面的日誌區域，同時也可以在瀏覽器控制台中查看詳細的錯誤信息。

## 維護和更新

### 定期維護

- **數據備份**：定期使用setup-database.html中的備份功能
- **系統更新**：從GitHub拉取最新代碼更新
- **性能優化**：定期清理不必要的數據記錄

### 更新日志

#### 版本 1.0.0
- 初始版本發布
- 實現基本的用戶管理和遊戲功能
- 支持QR碼生成和分數統計
- 提供完整的數據庫管理工具

## 許可協議

MIT License

## 聯繫方式

如有任何問題或建議，請聯繫系統管理員。

---

**QR碼遊戲系統** - 讓遊戲管理更簡單高效